<div id="chart-container-{{ include.id }}" style="width: 100%; height: 500px;"></div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    setTimeout(function() { // Ensure everything loads properly
        const el = document.getElementById('chart-container-{{ include.id }}');
        
        if (el) {
            am5.ready(function () {
                var root = am5.Root.new(el);
                root.rtl = true;

                root.setThemes([am5themes_Animated.new(root)]);

                var series = root.container.children.push(am5wc.WordCloud.new(root, {
                    maxCount: 100,
                    minWordLength: 2,
                    minFontSize: am5.percent(6),
                    maxFontSize: am5.percent(12),
                    angles: [0],
                    rtl: true
                }));

                var colorSet = am5.ColorSet.new(root, { step: 1 });

                series.labels.template.setAll({
                    paddingTop: 5,
                    paddingBottom: 5,
                    paddingLeft: 5,
                    paddingRight: 5,
                    fontFamily: "Tajawal, Arial, sans-serif",
                    fontSize: am5.percent(10),
                    direction: "rtl",
                    textAlign: "right",
                    cursor: "pointer"
                });

                series.labels.template.setup = function (label) {
                    label.set("background", am5.RoundedRectangle.new(root, { fillOpacity: 1, fill: colorSet.next() }));
                };

                // Set the data
                series.data.setAll([
                    { "category": "القرآن", "value": 10 },
                    { "category": "الكون", "value": 8 },
                    { "category": "الفطرة", "value": 7 }
                ]);
            });
        } else {
            console.error("Chart container not found:", 'chart-container-{{ include.id }}');
        }
    }, 500); // Small delay to ensure rendering
});
</script>
